webpackJsonp([1],{"+Qsz":function(t,e,a){"use strict";e.a={}},"/bwg":function(t,e,a){"use strict";var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"columns"},[a("div",{staticClass:"column is-4 is-offset-4"},[a("card",{attrs:{title:"Login",icon:"sign-in"}},[a("form",{on:{submit:t.makeLogin}},[a("b-field",{attrs:{label:"username"}},[a("b-input",{attrs:{type:"username",name:"sandel",icon:"envelope",required:""},model:{value:t.username,callback:function(e){t.username=e},expression:"username"}})],1),t._v(" "),a("b-field",{attrs:{label:"Password"}},[a("b-input",{staticClass:"is-half",attrs:{type:"password",icon:"key",required:"","password-reveal":""},model:{value:t.password,callback:function(e){t.password=e},expression:"password"}})],1),t._v(" "),a("div",{staticClass:"has-text-danger has-text-centered"},[t._v(t._s(t.error))]),t._v(" "),a("button",{class:["button","is-primary","is-fullwidth",{"is-loading":t.pending}],attrs:{type:"submit"}},[t._v("Login")])],1)])],1)])},n=[],r={render:s,staticRenderFns:n};e.a=r},"/gtH":function(t,e,a){"use strict";e.a={data:function(){return{tableData:[],isPaginated:!0,isPaginationSimple:!1,defaultSortDirection:"asc",perPage:5}},methods:{},created:function(){this.$store.dispatch("getUsers")}}},"3jL2":function(t,e,a){"use strict";var s=a("Ajl1"),n=a("/bwg"),r=a("VU/8"),i=r(s.a,n.a,!1,null,null,null);e.a=i.exports},"6x3Y":function(t,e,a){"use strict";var s=a("NYxO");e.a={computed:Object(s.b)(["user"])}},"91i/":function(t,e,a){"use strict";var s=a("NYxO");e.a={computed:Object(s.b)(["isLogged","user","admin"]),methods:{logout:function(){this.$store.dispatch("logout"),this.$router.push({name:"welcome"})}}}},Ajl1:function(t,e,a){"use strict";var s=a("MFsc");e.a={data:function(){return{username:"",password:"",error:"",pending:!1}},methods:{makeLogin:function(t){var e=this;t.preventDefault(),this.pending=!0,this.$store.dispatch("login",this).then(function(){e.pending=!1,e.$router.push({name:"home"})}).catch(function(t){e.pending=!1,e.error=t})}},components:{card:s.a}}},D5cn:function(t,e,a){"use strict";var s=a("6x3Y"),n=a("tQGI"),r=a("VU/8"),i=r(s.a,n.a,!1,null,null,null);e.a=i.exports},"DL/1":function(t,e){},DeUB:function(t,e,a){"use strict";var s=a("+Qsz"),n=a("U+WY"),r=a("VU/8"),i=r(s.a,n.a,!1,null,null,null);e.a=i.exports},"Du/2":function(t,e,a){"use strict";a.d(e,"a",function(){return s}),a.d(e,"c",function(){return n}),a.d(e,"b",function(){return r});var s="USER_AUTH_SUCCESS",n="USER_LOGOUT",r="USER_LIST"},I2Tb:function(t,e,a){"use strict";var s=a("PouT"),n=a("S2Qe"),r=a("VU/8"),i=r(s.a,n.a,!1,null,null,null);e.a=i.exports},IcnI:function(t,e,a){"use strict";var s=a("7+uW"),n=a("NYxO"),r=a("bREw");s.a.use(n.a),e.a=new n.a.Store({strict:!0,modules:{user:r.a}})},M93x:function(t,e,a){"use strict";var s=a("xJD8"),n=a("jYl8"),r=a("VU/8"),i=r(s.a,n.a,!1,null,null,null);e.a=i.exports},MFsc:function(t,e,a){"use strict";var s=a("YnX1"),n=a("XaHU"),r=a("VU/8"),i=r(s.a,n.a,!1,null,null,null);e.a=i.exports},NHnr:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=a("7+uW"),n=a("M93x"),r=a("YaEn"),i=a("9JMe"),o=(a.n(i),a("IcnI")),c=a("MMSg"),l=a.n(c),u=a("DL/1");a.n(u);s.a.use(l.a,{defaultIconPack:"fa"}),s.a.config.productionTip=!1,Object(i.sync)(o.a,r.a),window.a=new s.a({el:"#app",store:o.a,router:r.a,template:"<App/>",components:{App:n.a}})},PouT:function(t,e,a){"use strict";var s=a("NYxO");e.a={computed:Object(s.b)(["user"])}},QmSG:function(t,e,a){"use strict";var s="http://localhost:5000/api/";e.a={API:{LOGIN:s+"user/authorize",REGISTER:s+"user"}}},S2Qe:function(t,e,a){"use strict";var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("h1",{staticClass:"is-size-1 has-text-centered"},[t._v("Welcome home, "+t._s(t.user.userName)+"!")])])},n=[],r={render:s,staticRenderFns:n};e.a=r},SaQH:function(t,e,a){"use strict";var s=a("wRA1"),n=a("ThLd"),r=a("VU/8"),i=r(s.a,n.a,!1,null,null,null);e.a=i.exports},ThLd:function(t,e,a){"use strict";var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"columns"},[a("div",{staticClass:"column is-4 is-offset-4"},[a("card",{attrs:{title:"Register",icon:"user-plus"}},[a("form",{on:{submit:t.makeRegister}},[a("b-field",{attrs:{label:"Username"}},[a("b-input",{attrs:{type:"text",maxlength:"30",required:"","has-counter":!0},model:{value:t.username,callback:function(e){t.username=e},expression:"username"}})],1),t._v(" "),a("b-field",{attrs:{label:"Email"}},[a("b-input",{attrs:{type:"email",icon:"envelope",required:""},model:{value:t.email,callback:function(e){t.email=e},expression:"email"}})],1),t._v(" "),a("div",{staticClass:"columns"},[a("div",{staticClass:"column"},[a("b-field",{attrs:{label:"Password"}},[a("b-input",{staticClass:"is-half",attrs:{type:"password",icon:"key",minlength:"6",required:"",maxlength:"20","has-counter":!1,"password-reveal":""},model:{value:t.password,callback:function(e){t.password=e},expression:"password"}})],1)],1),t._v(" "),a("div",{staticClass:"column"},[a("b-field",{attrs:{label:"Confirm Password"}},[a("b-input",{attrs:{type:"password",icon:"key",minlength:"6",required:"",maxlength:"20","has-counter":!1,"password-reveal":""},model:{value:t.cpassword,callback:function(e){t.cpassword=e},expression:"cpassword"}})],1)],1)]),t._v(" "),a("div",{staticClass:"has-text-danger has-text-centered"},[t._v(t._s(t.error))]),t._v(" "),a("button",{class:["button","is-primary","is-fullwidth",{"is-loading":t.pending}],attrs:{type:"submit"}},[t._v("Register")])],1)])],1)])},n=[],r={render:s,staticRenderFns:n};e.a=r},"U+WY":function(t,e,a){"use strict";var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("h1",[t._v("Welcome!")]),t._v("\n  You can "),a("router-link",{attrs:{to:"register"}},[t._v("Register")]),t._v("\n  or\n  "),a("router-link",{attrs:{to:"login"}},[t._v("Login")])],1)},n=[],r={render:s,staticRenderFns:n};e.a=r},XIgv:function(t,e,a){"use strict";var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("nav",{staticClass:"navbar is-light",staticStyle:{"margin-bottom":"10px"}},[a("div",{staticClass:"navbar-brand"},[a("router-link",{staticClass:"navbar-item",attrs:{to:"/"}},[a("img",{attrs:{src:"https://image.flaticon.com/icons/png/512/25/25694.png",alt:"Logo"}})]),t._v(" "),t._m(0,!1,!1)],1),t._v(" "),t.isLogged?a("div",{staticClass:"navbar-menu"},[a("div",{staticClass:"navbar-end"},[a("b-dropdown",{attrs:{position:"is-bottom-left"}},[a("a",{staticClass:"navbar-item",attrs:{slot:"trigger"},slot:"trigger"},[a("span",[t._v("Welcome, "),a("b",[t._v(t._s(t.user.userName))])]),t._v(" "),a("b-icon",{attrs:{icon:"angle-down"}})],1),t._v(" "),a("b-dropdown-item",{attrs:{"has-link":""}},[a("router-link",{attrs:{to:"/profile"}},[a("b-icon",{attrs:{icon:"user"}}),t._v("\n            Profile\n          ")],1)],1),t._v(" "),a("hr",{staticClass:"dropdown-divider"}),t._v(" "),a("b-dropdown-item",{attrs:{value:"logout"},on:{click:t.logout}},[a("b-icon",{attrs:{icon:"sign-out"}}),t._v("\n            Logout\n        ")],1)],1)],1),t._v(" "),t.admin?a("div",{staticClass:"navbar-end"},[a("b-dropdown",{attrs:{position:"is-bottom-left"}},[a("a",{staticClass:"navbar-item",attrs:{slot:"trigger"},slot:"trigger"},[a("span",[t._v("Administration")]),t._v(" "),a("b-icon",{attrs:{icon:"angle-down"}})],1),t._v(" "),a("b-dropdown-item",{attrs:{"has-link":""}},[a("router-link",{attrs:{to:"/users"}},[a("b-icon",{attrs:{icon:"user"}}),t._v("\n              Users\n          ")],1)],1)],1)],1):t._e()]):a("div",{staticClass:"navbar-menu"},[a("div",{staticClass:"navbar-end"},[a("router-link",{staticClass:"is-tab navbar-item",attrs:{to:"login"}},[t._v("Login")]),t._v(" "),a("router-link",{staticClass:"is-tab navbar-item",attrs:{to:"register"}},[t._v("Register")])],1)])])},n=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("button",{staticClass:"button navbar-burger"},[a("span"),t._v(" "),a("span"),t._v(" "),a("span")])}],r={render:s,staticRenderFns:n};e.a=r},XaHU:function(t,e,a){"use strict";var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"card"},[a("div",{staticClass:"card-header"},[a("div",{staticClass:"card-header-title"},[t._v("\n      "+t._s(t.title)+"\n    ")]),t._v(" "),a("div",{staticClass:"card-header-icon"},[a("i",{class:"fa fa-"+t.icon})])]),t._v(" "),a("div",{staticClass:"card-content"},[t._t("default")],2),t._v(" "),t.$slots.footer?a("div",{staticClass:"card-footer"},[a("div",{staticClass:"card-footer-item"},[t._t("footer")],2)]):t._e()])},n=[],r={render:s,staticRenderFns:n};e.a=r},YaEn:function(t,e,a){"use strict";var s=a("7+uW"),n=a("/ocq"),r=a("IcnI"),i=a("3jL2"),o=a("SaQH"),c=a("DeUB"),l=a("I2Tb"),u=a("D5cn"),d=a("zXP0");s.a.use(n.a);var v=new n.a({linkActiveClass:"is-active",routes:[{path:"/",name:"home",component:l.a,meta:{auth:!0}},{path:"/profile",name:"profile",component:u.a,meta:{auth:!0}},{path:"/welcome",name:"welcome",component:c.a},{path:"/login",name:"login",component:i.a},{path:"/users",name:"users",component:d.a,meta:{auth:!0}},{path:"/register",name:"Register",component:o.a}]});v.beforeEach(function(t,e,a){t.matched.some(function(t){return t.meta.auth})?r.a.getters.isLogged?a():a({path:"/welcome"}):a()}),e.a=v},YnX1:function(t,e,a){"use strict";e.a={props:["title","icon"]}},aSq3:function(t,e,a){"use strict";var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("section",[a("b-field",{attrs:{grouped:"","group-multiline":""}},[a("b-select",{model:{value:t.defaultSortDirection,callback:function(e){t.defaultSortDirection=e},expression:"defaultSortDirection"}},[a("option",{attrs:{value:"asc"}},[t._v("Default sort direction: ASC")]),t._v(" "),a("option",{attrs:{value:"desc"}},[t._v("Default sort direction: DESC")])]),t._v(" "),a("b-select",{attrs:{disabled:!t.isPaginated},model:{value:t.perPage,callback:function(e){t.perPage=e},expression:"perPage"}},[a("option",{attrs:{value:"5"}},[t._v("5 per page")]),t._v(" "),a("option",{attrs:{value:"10"}},[t._v("10 per page")]),t._v(" "),a("option",{attrs:{value:"15"}},[t._v("15 per page")]),t._v(" "),a("option",{attrs:{value:"20"}},[t._v("20 per page")])]),t._v(" "),a("div",{staticClass:"control is-flex"},[a("b-switch",{model:{value:t.isPaginated,callback:function(e){t.isPaginated=e},expression:"isPaginated"}},[t._v("Paginated")])],1),t._v(" "),a("div",{staticClass:"control is-flex"},[a("b-switch",{attrs:{disabled:!t.isPaginated},model:{value:t.isPaginationSimple,callback:function(e){t.isPaginationSimple=e},expression:"isPaginationSimple"}},[t._v("Simple pagination")])],1)],1),t._v(" "),a("b-table",{attrs:{data:t.tableData,paginated:t.isPaginated,"per-page":t.perPage,"pagination-simple":t.isPaginationSimple,"default-sort-direction":t.defaultSortDirection,"default-sort":"user.first_name"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("b-table-column",{attrs:{field:"id",label:"ID",width:"40",sortable:"",numeric:""}},[t._v("\n                   "+t._s(e.row.id)+"\n               ")]),t._v(" "),a("b-table-column",{attrs:{field:"user.first_name",label:"First Name",sortable:""}},[t._v("\n                   "+t._s(e.row.user.first_name)+"\n               ")]),t._v(" "),a("b-table-column",{attrs:{field:"user.last_name",label:"Last Name",sortable:""}},[t._v("\n                   "+t._s(e.row.user.last_name)+"\n               ")]),t._v(" "),a("b-table-column",{attrs:{field:"date",label:"Date",sortable:"",centered:""}},[a("span",{staticClass:"tag is-success"},[t._v("\n                       "+t._s(new Date(e.row.date).toLocaleDateString())+"\n                   ")])]),t._v(" "),a("b-table-column",{attrs:{label:"Gender"}},[a("b-icon",{attrs:{pack:"fa",icon:"Male"===e.row.gender?"mars":"venus"}}),t._v("\n                   "+t._s(e.row.gender)+"\n               ")],1)]}}])})],1)},n=[],r={render:s,staticRenderFns:n};e.a=r},bREw:function(t,e,a){"use strict";var s,n=a("bOdI"),r=a.n(n),i=a("mvHQ"),o=a.n(i),c=a("//Fk"),l=a.n(c),u=a("mtWM"),d=a.n(u),v=a("QmSG"),m=a("Du/2"),p={token:sessionStorage.getItem("token")||"",user:JSON.parse(sessionStorage.getItem("user"))||{}},f={isLogged:function(t){return!!t.token},user:function(t){return t.user},refresh_token:function(t){return t.refresh_token},admin:function(t){return 4===t.user.roleId},users:function(t){return t.users||[]}},g={getUsers:function(t){return new l.a(function(e,a){var s=p.token;d.a.get(v.a.API.REGISTER,{headers:{Authorization:"Bearer "+s}}).then(function(e){console.log(e),t.commit(m.b,{users:e.data})})})},login:function(t,e){var a=e.username,s=e.password;return new l.a(function(e,n){d.a.post(v.a.API.LOGIN,{username:a,password:s}).then(function(a){if(200===a.status){var s="Administrator"===a.data.user.role.name;t.commit(m.a,{user:a.data.user,token:a.data.accessToken,refresh_token:a.data.refreshToken,admin:s}),e()}else n()}).catch(function(){n("Error sending request to server!")})})},registerUser:function(t,e){var a=e.username,s=e.password,n=e.cpassword,r=e.email;return new l.a(function(t,e){s!==n&&e(new Error("Passwords do not match")),d.a.post(v.a.API.REGISTER,{username:a,password:s,confirmPassword:n,email:r}).then(function(a){201===a.status?t("User created"):e("Cannot create user, please try again")})})},logout:function(t){t.commit(m.c)}},_=(s={},r()(s,m.a,function(t,e){var a=e.user,s=e.token,n=e.refreshToken,r=e.admin;t.user=a,t.error="",t.token=s,t.refresh_token=n,t.admin=r,sessionStorage.setItem("token",s),sessionStorage.setItem("user",o()(a))}),r()(s,m.c,function(t){t.user={},t.token="",sessionStorage.clear()}),r()(s,m.b,function(t,e){var a=e.users;t.users=a}),s);e.a={state:p,getters:f,actions:g,mutations:_}},jYl8:function(t,e,a){"use strict";var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"app"}},[a("navbar"),t._v(" "),a("div",{staticClass:"container"},[a("router-view")],1)],1)},n=[],r={render:s,staticRenderFns:n};e.a=r},ntvM:function(t,e,a){"use strict";var s=a("91i/"),n=a("XIgv"),r=a("VU/8"),i=r(s.a,n.a,!1,null,null,null);e.a=i.exports},tQGI:function(t,e,a){"use strict";var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{},[a("div",{staticClass:"box"},[a("h1",{staticClass:"is-size-1"},[t._v(t._s(t.user.userName))]),t._v(" "),a("p",[t._v("Email: "),a("em",[t._v(t._s(t.user.email))])])]),t._v(" "),a("div",{staticClass:"box"},[a("h1",{staticClass:"is-size-1"},[t._v("Roles")]),t._v(" "),a("p",[t._v("Roles: "),a("em",[t._v(" "+t._s(t.user.role.name))])])])])},n=[],r={render:s,staticRenderFns:n};e.a=r},wRA1:function(t,e,a){"use strict";var s=a("MFsc");e.a={data:function(){return{username:"",email:"",password:"",cpassword:"",pending:!1,error:""}},methods:{makeRegister:function(t){var e=this;t.preventDefault(),console.log(this.password),console.log(this.cpassword),this.pending=!0,this.$store.dispatch("registerUser",this).then(function(){console.log("Then register"),e.pending=!1,e.$router.push({name:"login"})}).catch(function(t){e.error=t,e.pending=!1})}},components:{card:s.a}}},xJD8:function(t,e,a){"use strict";var s=a("ntvM");e.a={name:"app",components:{navbar:s.a}}},zXP0:function(t,e,a){"use strict";var s=a("/gtH"),n=a("aSq3"),r=a("VU/8"),i=r(s.a,n.a,!1,null,null,null);e.a=i.exports}},["NHnr"]);
//# sourceMappingURL=app.19d9d9e4a18829ebef57.js.map